<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Cobra </title>
<style>
  body { font-family: sans-serif; text-align: center; background: #222; color: white; margin:0; padding:0;}
  #gameCanvas { background: #0dc2d6; display: block; margin: 20px auto; }
  /* Estilo dos botões do cursor */
  #controls {
    width: 200px;
    margin: 10px auto 30px;
    user-select: none;
  }
  #controls > div {
    display: flex;
    justify-content: center;
  }
  button {
    background: #444;
    border: none;
    color: white;
    font-size: 24px;
    padding: 10px 16px;
    margin: 4px;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    width: 50px;
    height: 50px;
    line-height: 1;
  }
  button:active {
    background: #666;
  }
  /* Layout direcional */
  #up { margin-left: 58px; }
  #left, #right { flex: 1; }
  #down { margin-left: 58px; }
</style>
</head>
<body>
  <h1>Service Snake</h1>

  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <div id="controls">
    <div><button id="up">↑</button></div>
    <div>
      <button id="left">←</button>
      <button id="down">↓</button>
      <button id="right">→</button>
    </div>
  </div>

  <div id="info">
    <p>Use Cursor Key to play ! .</p>
    <p>.</p>
  </div>

<script>
(() => {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const gridSize = 40;
  const tileCount = canvas.width / gridSize;

  let headImg = new Image();
  headImg.src = "https://raw.githubusercontent.com/Tofast78/Cobra/c144bcafbf8d6cbbc38193270c57abaaef1e0a98/assa_van.jpg";

  let foodImg = new Image();
  foodImg.src = "https://raw.githubusercontent.com/Tofast78/Cobra/c144bcafbf8d6cbbc38193270c57abaaef1e0a98/roller_cobra.jpg";

  let snake = [{x:10, y:10}];
  let snakeDir = {x:0, y:0};
  let food = {x:5, y:5};
  let snakeBodyImgs = [];

  function placeFood() {
    let x, y;
    do {
      x = Math.floor(Math.random() * tileCount);
      y = Math.floor(Math.random() * tileCount);
    } while (snake.some(s => s.x === x && s.y === y));
    food = {x, y};
  }

  window.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowUp':
        if (snakeDir.y !== 1) snakeDir = {x:0, y:-1};
        break;
      case 'ArrowDown':
        if (snakeDir.y !== -1) snakeDir = {x:0, y:1};
        break;
      case 'ArrowLeft':
        if (snakeDir.x !== 1) snakeDir = {x:-1, y:0};
        break;
      case 'ArrowRight':
        if (snakeDir.x !== -1) snakeDir = {x:1, y:0};
        break;
    }
  });

  document.getElementById('up').addEventListener('click', () => {
    if (snakeDir.y !== 1) snakeDir = {x:0, y:-1};
  });
  document.getElementById('down').addEventListener('click', () => {
    if (snakeDir.y !== -1) snakeDir = {x:0, y:1};
  });
  document.getElementById('left').addEventListener('click', () => {
    if (snakeDir.x !== 1) snakeDir = {x:-1, y:0};
  });
  document.getElementById('right').addEventListener('click', () => {
    if (snakeDir.x !== -1) snakeDir = {x:1, y:0};
  });

  function update() {
    if (snakeDir.x === 0 && snakeDir.y === 0) {
      draw();
      return;
    }
    let head = {x: snake[0].x + snakeDir.x, y: snake[0].y + snakeDir.y};

    if (head.x < 0) head.x = tileCount - 1;
    else if (head.x >= tileCount) head.x = 0;
    if (head.y < 0) head.y = tileCount - 1;
    else if (head.y >= tileCount) head.y = 0;

    if (snake.some(s => s.x === head.x && s.y === head.y)) {
      resetGame();
      return;
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
      snakeBodyImgs.push(foodImg);
      placeFood();
    } else {
      snake.pop();
      snakeBodyImgs.pop();
    }

    draw();
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(foodImg, food.x * gridSize, food.y * gridSize, gridSize, gridSize);
    for (let i = snake.length - 1; i > 0; i--) {
      let segment = snake[i];
      ctx.drawImage(foodImg, segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
    }
    let head = snake[0];
    ctx.drawImage(headImg, head.x * gridSize, head.y * gridSize, gridSize, gridSize);
  }

  function resetGame() {
    snake = [{x:10, y:10}];
    snakeDir = {x:0, y:0};
    snakeBodyImgs = [];
    placeFood();
  }

  resetGame();
  setInterval(update, 125);
})();
</script>

<!-- Contador de visitas -->
<div style="margin-top:20px;">
  <a href="https://es.web-counter.net" title="contador de visitas">
    <img src="https://www.web-counter.net/count_20091204.php?c=bYliCMnxks5" style="border:0;padding:0;margin:0;" alt="contador de visitas">
  </a><br/>
  <font size="1" face="Arial">
    <a href="https://tr.web-counter.net" title="Sayaç">Sayaç</a><br/>
    <a href="https://es.web-counter.net" title="contador de visitas">contador de visitas</a>
  </font>
</div>

</body>
</html>

